<!doctype html><html lang=de><head><title>Python auf dem ESP8266 :: Philipp Weißmann</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Der ESP8266 ist ein kleiner Mikrocontroller, den es für kleines Geld in verschiedenen Ausführungen und von verschiedensten Herstellern gibt.
Das kleine 32-Bit Board besticht neben einfacher Zugänglichkeit, niedrigem Preis und einem on-board WLAN Modul.
Für viele Zwecke lohnt sich ein Blick auf Micropython als Alternative zu &amp;ldquo;klassischer&amp;rdquo; Arduino C++ Entwicklung für das kleine Wunderwerk.
Diese auf Python 3 basierende, spezialisierte Version von Python bringt vieles mit, was man sich auf einer Entwicklungsplattform wünscht:
Interaktive Programmierung/Nutzung des Geräts mit REPL Bibliotheken für Netzwerkkonfiguration Bibliotheken für Schnittstellen (Pins, I2C, SPI, &amp;hellip;) "><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://philipp-weissmann.de/python-auf-dem-esp8266/><link rel=stylesheet href=https://philipp-weissmann.de/styles.css><link rel="shortcut icon" href=https://philipp-weissmann.de/img/theme-colors/pink.png><link rel=apple-touch-icon href=https://philipp-weissmann.de/img/theme-colors/pink.png><meta name=twitter:card content="summary"><meta property="og:locale" content="de"><meta property="og:type" content="article"><meta property="og:title" content="Python auf dem ESP8266"><meta property="og:description" content="Der ESP8266 ist ein kleiner Mikrocontroller, den es für kleines Geld in verschiedenen Ausführungen und von verschiedensten Herstellern gibt.
Das kleine 32-Bit Board besticht neben einfacher Zugänglichkeit, niedrigem Preis und einem on-board WLAN Modul.
Für viele Zwecke lohnt sich ein Blick auf Micropython als Alternative zu &amp;ldquo;klassischer&amp;rdquo; Arduino C++ Entwicklung für das kleine Wunderwerk.
Diese auf Python 3 basierende, spezialisierte Version von Python bringt vieles mit, was man sich auf einer Entwicklungsplattform wünscht:
Interaktive Programmierung/Nutzung des Geräts mit REPL Bibliotheken für Netzwerkkonfiguration Bibliotheken für Schnittstellen (Pins, I2C, SPI, &amp;hellip;) "><meta property="og:url" content="https://philipp-weissmann.de/python-auf-dem-esp8266/"><meta property="og:site_name" content="Philipp Weißmann"><meta property="og:image" content="https://philipp-weissmann.de/img/favicon/pink.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Uncategorized"><meta property="article:published_time" content="2017-01-20 17:00:02 +0000 UTC"></head><body class=pink><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Philipp Weißmann</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/impressum>Impressum</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/impressum>Impressum</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://philipp-weissmann.de/python-auf-dem-esp8266/>Python auf dem ESP8266</a></h1><div class=post-meta><time class=post-date>2017-01-20 ::
[Updated :: 2017-01-20]</time>
<span class=post-author>Philipp Weißmann</span></div><span class=post-tags>#<a href=https://philipp-weissmann.de/tags/embedded/>Embedded</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/esp8266/>Esp8266</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/micropython/>Micropython</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/python/>Python</a>&nbsp;</span><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents></nav></div><div class=post-content><div><p>Der <a href=https://de.wikipedia.org/wiki/ESP8266>ESP8266</a> ist ein kleiner Mikrocontroller, den es für kleines Geld in verschiedenen Ausführungen und von verschiedensten Herstellern gibt.<br>Das kleine 32-Bit Board besticht neben einfacher Zugänglichkeit, niedrigem Preis und einem on-board WLAN Modul.</p><p>Für viele Zwecke lohnt sich ein Blick auf <a href=https://micropython.org/>Micropython</a> als Alternative zu &ldquo;klassischer&rdquo; Arduino C++ Entwicklung für das kleine Wunderwerk.</p><p>Diese auf Python 3 basierende, spezialisierte Version von Python bringt vieles mit, was man sich auf einer Entwicklungsplattform wünscht:</p><ul><li>Interaktive Programmierung/Nutzung des Geräts mit <a href=https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop>REPL</a></li><li>Bibliotheken für Netzwerkkonfiguration</li><li>Bibliotheken für Schnittstellen (Pins, I2C, SPI, &mldr;)</li></ul><p>Für den einfachen Einstieg mit dem ESP8266 laden wir uns zunächst die aktuellste (stable) Version für das Board <a href=https://micropython.org/download>hier</a> herunter.</p><p>Als nächstes installieren wir uns das Tool <a href=https://github.com/espressif/esptool>esptool</a>, welches zum Flashen des Microcontrollers mit unserem Micropython-Image genutzt wird.<br>Dies geschieht am einfachsten mit</p><pre><code>pip3 install esptool
</code></pre><p>bzw.</p><pre><code>sudo -H pip3 install esptool
</code></pre><p>falls notwendig.</p><p>Unter Windows und OS X ist es nun notwendig, den passenden Treiber für das Board zu installieren. Dieser sorgt dafür, dass das Gerät als serielle Schnittstelle auftaucht - unter aktuellen GNU/Linux Versionen ist dies in der Regel nicht notwendig.</p><p>Nun sollte das Gerät beim Anschliessen via USB auftauchen:<br>So meldet sich der ESP8266 der Variante &ldquo;Nodemcu&rdquo; als<br><code>/dev/cu.SLAB_USBtoUART</code> bzw <code>/dev/tty.SLAB_USBtoUART</code>.</p><p>Dies unterscheidet sich nach Treiber und Betriebssystem.</p><p><strong>Bei allen folgenden Beispielen muss <code>/dev/cu.SLAB_USBtoUART</code> mit dem passenden Pfad ersetzt werden.</strong></p><p>Zunächst löschen wir den vorhandenen Flash des Geräts vollständig:</p><pre><code>esptool.py --port /dev/cu.SLAB_USBtoUART erase_flash
</code></pre><p>Dann schreiben wir das heruntergeladene Image auf unser Board.</p><pre><code>esptool.py \
    --port /dev/cu.SLAB_USBtoUART \
    -b 460800 \
    write_flash \
    --flash_size=detect --flash_mode=dio 0 \
    /Pfad/Zu/Image/esp8266-20170108-v1.8.7.bin --verify
</code></pre><p>Bei Problemen kann die Baud-Rate (hier: 460800) verringert werden. Zudem<br>sollte man dringend auf die Spannungsversorgung des Geräts achten. Schlechte<br>USB Hubs können hier für viel Ärger sorgen.</p><p>Nun können wir bereits mit dem ESP8266 kommunizieren:</p><pre><code>screen /dev/cu.SLAB_USBtoUART -b 115200
</code></pre><p>Wir sehen (spätestens beim Drücken des Reset-Buttons des ESPs) unsere vertrauten Python REPL, welche nun interaktive Benutzung auf dem Gerät zulässt.</p><p>Entwickelt man jedoch etwas länger für das Gerät, möchte man natürlich seine gewohnte Entwicklungsumgebung/Editor einsetzen. Nun kommt das Tool <a href=https://github.com/adafruit/ampy>ampy</a> ins Spiel:</p><p>Dieses kleine Helferlein erlaubt es uns Dateien von und auf den ESP8266 zu<br>kopieren und ein Skript auszuführen. Zur Installation kommt abermals kommt pip zum Einsatz:</p><pre><code>pip3 install adafruit-ampy
</code></pre><p>bzw.</p><pre><code>sudo -H pip3 install adafruit-ampy
</code></pre><p>Nun können wir unsere Bibliotheken-Dateien auf den ESP kopieren.</p><p>Auch unser Hauptprogramm (auf dem Gerät immer <code>main.py</code>) können wir so auf das Gerät bringen.<br>Dieses startet bei jedem Neustart des Geräts automatisch.</p><pre><code>ampy -p /dev/cu.SLAB_USBtoUART put main.py
</code></pre><p>Wollen wir das Programm gleich ohne Reset starten, können wir auch dies einfach mit <code>ampy</code> erledigen:</p><pre><code>ampy -p /dev/cu.SLAB_USBtoUART run -n main.py
</code></pre><p>Mit diesen Werkzeugen ist es nun möglich in wenigen Sekunden automatisiert neue Versionen von Software auf das Gerät aufzuspielen um diese auszuprobieren.<br>Dies verringert die Zeit des klassischen Workflows von &ldquo;Programmieren, (Cross)-Kompilieren, Flashen&rdquo; drastisch und erlaubt Fans von Python ein komfortables Arbeiten mit dem ESP8266.</p><p>Viel Spaß!</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://philipp-weissmann.de/docker-compose_mit_systemd/><span class=button__icon>←</span>
<span class=button__text>Docker services via docker-compose und systemd template</span></a></span>
<span class="button next"><a href=https://philipp-weissmann.de/windows-auf-schlafentzug/><span class=button__text>Windows auf Schlafentzug</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>