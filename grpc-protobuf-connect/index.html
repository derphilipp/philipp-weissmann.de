<!doctype html><html lang=de><head><title>GRPC, Protobuf und connect :: Philipp Weißmann</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="GRPC, Protobuf und Connect Als Entwickler bin ich immer auf der Suche nach effizienten und zuverlässigen Technologien, die meine Arbeit verbessern und vereinfachen. In den letzten Jahren habe ich GRPC in zahlreichen Projekten eingesetzt und bin nach wie vor begeistert von den Vorteilen, die es bietet. Aber nicht nur weil es schnell und effizient ist - sondern weil es menschliche Absprachen und Teamarbeit einfacher macht. Wie funktioniert das und warum &ldquo;Connect&rdquo; noch mit reinspielt:
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://philipp-weissmann.de/grpc-protobuf-connect/><link rel=stylesheet href=https://philipp-weissmann.de/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css><link rel=stylesheet href=https://philipp-weissmann.de/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css><link rel=stylesheet href=https://philipp-weissmann.de/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css><link rel=stylesheet href=https://philipp-weissmann.de/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css><link rel=stylesheet href=https://philipp-weissmann.de/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://philipp-weissmann.de/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css><link rel=stylesheet href=https://philipp-weissmann.de/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css><link rel=stylesheet href=https://philipp-weissmann.de/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css><link rel=stylesheet href=https://philipp-weissmann.de/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css><link rel=stylesheet href=https://philipp-weissmann.de/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css><link rel=stylesheet href=https://philipp-weissmann.de/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css><link rel=stylesheet href=https://philipp-weissmann.de/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css><link rel=stylesheet href=https://philipp-weissmann.de/css/terminal.min.4b367d85d0d0061435650561285afed36c46a7cf8dc6d7ed5642d98e589fa622.css><link rel=stylesheet href=https://philipp-weissmann.de/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://philipp-weissmann.de/favicon.png><link rel=apple-touch-icon href=https://philipp-weissmann.de/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="de"><meta property="og:type" content="article"><meta property="og:title" content="GRPC, Protobuf und connect"><meta property="og:description" content="GRPC, Protobuf und Connect Als Entwickler bin ich immer auf der Suche nach effizienten und zuverlässigen Technologien, die meine Arbeit verbessern und vereinfachen. In den letzten Jahren habe ich GRPC in zahlreichen Projekten eingesetzt und bin nach wie vor begeistert von den Vorteilen, die es bietet. Aber nicht nur weil es schnell und effizient ist - sondern weil es menschliche Absprachen und Teamarbeit einfacher macht. Wie funktioniert das und warum &ldquo;Connect&rdquo; noch mit reinspielt:
"><meta property="og:url" content="https://philipp-weissmann.de/grpc-protobuf-connect/"><meta property="og:site_name" content="Philipp Weißmann"><meta property="og:image" content="https://philipp-weissmann.de/img/interface.jpg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Uncategorized"><meta property="article:published_time" content="2025-02-09 18:29:07 +0000 UTC"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Philipp Weißmann</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/impressum>Impressum</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/impressum>Impressum</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://philipp-weissmann.de/grpc-protobuf-connect/>GRPC, Protobuf und connect</a></h1><div class=post-meta><time class=post-date>2025-02-09&nbsp;[Updated: 2025-02-09]</time><span class=post-author>Philipp Weißmann</span></div><span class=post-tags>#<a href=https://philipp-weissmann.de/tags/grpc/>grpc</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/connect/>connect</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/protobuf/>protobuf</a>&nbsp;
#<a href=https://philipp-weissmann.de/tags/development/>development</a>&nbsp;
</span><img src=https://philipp-weissmann.de/img/interface.jpg class=post-cover alt="GRPC, Protobuf und connect" title="Cover Image"><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#was-ist-grpc>Was ist GRPC?</a></li><li><a href=#was-ist-protobuf>Was ist Protobuf?</a></li><li><a href=#beispiel>Beispiel</a></li><li><a href=#vorteile-für-teams>Vorteile für Teams</a></li><li><a href=#reflection>Reflection</a></li><li><a href=#die-probleme>Die Probleme</a></li><li><a href=#connect>Connect</a></li><li><a href=#kurzfassung-tools>Kurzfassung Tools</a></li><li><a href=#fazit>Fazit</a></li></ul></nav></div><div class=post-content><div><h1 id=grpc-protobuf-und-connect>GRPC, Protobuf und Connect<a href=#grpc-protobuf-und-connect class=hanchor arialabel=Anchor>#</a></h1><p>Als Entwickler bin ich immer auf der Suche nach effizienten und zuverlässigen Technologien, die meine Arbeit verbessern und vereinfachen. In den letzten Jahren habe ich <a href=https://grpc.io/>GRPC</a> in zahlreichen Projekten eingesetzt und bin nach wie vor begeistert von den Vorteilen, die es bietet.
Aber nicht nur weil es schnell und effizient ist - sondern weil es menschliche Absprachen und Teamarbeit einfacher macht.
Wie funktioniert das und warum &ldquo;<a href=https://connectrpc.com/>Connect</a>&rdquo; noch mit reinspielt:</p><h2 id=was-ist-grpc>Was ist GRPC?<a href=#was-ist-grpc class=hanchor arialabel=Anchor>#</a></h2><p>GRPC (gRPC Remote Procedure Call) ist ein modernes, leistungsstarkes Framework für Remote Procedure Calls (RPC), das von Google entwickelt wurde. Es ermöglicht es Anwendungen, Methoden auf entfernten Systemen so aufzurufen, als wären sie lokale Funktionen. GRPC nutzt HTTP/2 für den Transport und Protocol Buffers (Protobuf) als Serialisierungsformat. Mit anderen Worten: Binäre Batzen per UDP. Klingt schlimm - ist es aber gar nicht: Ich nehm euch mit!</p><h2 id=was-ist-protobuf>Was ist Protobuf?<a href=#was-ist-protobuf class=hanchor arialabel=Anchor>#</a></h2><p>Protocol Buffers, oder kurz Protobuf, ist eine plattform- und sprachunabhängige Methode zur Serialisierung strukturierter Daten. Es wurde ebenfalls von Google entwickelt und dient als Grundlage für die Datenkommunikation in GRPC.</p><p>Also:</p><ul><li>Protobuf = Datenformat</li><li>GRPC = Kommunikationsprotokoll</li></ul><h2 id=beispiel>Beispiel<a href=#beispiel class=hanchor arialabel=Anchor>#</a></h2><p>Schauen wir uns ein einfaches Beispiel an.
Lasst uns ein einfaches Protobuf-File erstellen, der die Kommunikation mit einem Backofen darstellt.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span>syntax <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;proto3&#34;</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#f92672>package</span> smartoven;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>// Dienst OvenControl zum Steuern des Backofens
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>service</span> OvenControl {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#75715e>// Methode zum Backen eines Gegenstands
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>rpc</span> BakeItem (BakeRequest) <span style=color:#66d9ef>returns</span> (BakeResponse) {}<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>BakeRequest</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> item <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// Was soll gebacken werden?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>int32</span> temperature <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;  <span style=color:#75715e>// Temperatur in Grad Celsius
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>int32</span> duration <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;  <span style=color:#75715e>// Backdauer in Minuten
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>BakeResponse</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>bool</span> success <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// War der Backvorgang erfolgreich?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>message</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;  <span style=color:#75715e>// Zusätzliche Informationen oder Fehlermeldungen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Wir lesen das so: Wir haben einen Service <code>OvenControl</code>, der eine Methode <code>BakeItem</code> anbietet. Diese Methode erwartet ein <code>BakeRequest</code>-Objekt und gibt ein <code>BakeResponse</code>-Objekt zurück.</p><p>Die Objekte <code>BakeRequest</code> bestehen aus einem <code>item</code> (z.B. &ldquo;Pizza&rdquo;), einer <code>temperature</code> (z.B. 200) und einer <code>duration</code> (z.B. 20).</p><p>Das <code>BakeResponse</code>-Objekt besteht aus einem <code>success</code>-Flag und einer <code>message</code>.</p><p>Alle Datentypen sind in Protobuf statisch definiert und können auch nicht &ldquo;falsch&rdquo; übergeben werden. Das ist ein großer Vorteil gegenüber JSON oder XML. Auch gibt es weitere Datentypen, die hinzugefügt oder selbst definiert können, wie z.B. Timestamps, Enums oder Maps.</p><p>Zumdem beherrscht GRPC auch Streaming, also das Senden und Empfangen von mehreren Nachrichten. Das ist besonders nützlich, wenn wir z.B. eine Chat-Anwendung entwickeln. Auch bidirectional Streaming ist möglich, also das gleichzeitige Senden und Empfangen von Nachrichten.</p><h2 id=vorteile-für-teams>Vorteile für Teams<a href=#vorteile-für-teams class=hanchor arialabel=Anchor>#</a></h2><p>Stellen wir uns vor, dass dieses Projekt von mehreren Teams entwickelt wird. Jedes Team hat seine eigene Sprache und Technologie. Hier kommt mein Hautpargument für GRPC und Protobuf: Die Protobuf-Datei ist DIE Schnittstelle zwischen den Teams. Kein Rätselraten mehr, wie die Daten aussehen oder wie sie serialisiert werden. Die Datei stellt die &ldquo;Wahrheit&rdquo; und gleichzeitig Dokumentation für die Teams da.</p><p>Aber da hört es nicht auf: Wäre es nicht wundervoll, wenn jemand für uns den Server schreiben würde? Oder den Client? Oder beides? GRPC bietet uns die Möglichkeit, automatisch Clients und Server in verschiedenen Sprachen zu generieren. Das spart uns eine Menge Zeit und Fehler.
Natürlich muss die Funktionalität noch implementiert werden, aber die Grundlagen sind schon mal gelegt - und das spart Zeit und Nerven.</p><h2 id=reflection>Reflection<a href=#reflection class=hanchor arialabel=Anchor>#</a></h2><p>Aber wäre es nicht toll, wenn wir - gerade für Tests, nun einfach solche Protobuf/GRPC Nachrichten einfach senden könnten? Oder Empfangen? Gar kein Problem!
Wenn wir unseren Server mit Reflection starten (ist i.d.R. eine einfaches Flag), können wir mit GUI und cli clients einfach auf den Server zugreifen und Nachrichten senden. Ohne die Definition in die Hand nehmen zu müssen - die liefert der Server dem Client automatisch mit aus! Das ist ein mächtiges Werkzeug für die Entwicklung und das Testen.</p><h2 id=die-probleme>Die Probleme<a href=#die-probleme class=hanchor arialabel=Anchor>#</a></h2><p>Aber nun kommt der Pferdefuß: Dadurch, dass GRPC UDP nutzt, ist es nicht so einfach, GRPC im Browser zu nutzen. Hier gibt es aber auch wieder viele Lösungen:</p><ul><li>REST Gateway: Ein Gateway, dass GRPC in REST umwandelt
Viele GRPC Server bieten die Möglichkeit, automatisch ein REST Gateway zu starten. Hierbei wird der GRPC Server um einen REST Server erweitert, der die GRPC Anfragen in REST Anfragen umwandelt. Das ist eine einfache Möglichkeit, GRPC in Browsern zu nutzen. Und eine wundervolle Art auf GRPC zu migrieren, ohne alte Clients kaputt zu machen. Aber hier &ldquo;verlieren&rdquo; wir die Vorteile von GRPC - zumindest im Browser. Ach: Und Streaming geht auch nicht.</li><li><a href=https://github.com/grpc/grpc-web>grpc-web</a>: Eine Javascript Bibliothek, die es erlaubt mit GRPC zu kommunizieren - hier muss aber der Server auch entsprechend angepasst werden. Zudem gibt es nur Streaming von Server zu client. Schade.</li></ul><h2 id=connect>Connect<a href=#connect class=hanchor arialabel=Anchor>#</a></h2><p>Meine Lieblingslösung für das Problem ist aber Connect.
Connect ist eine GRPC kompatible Bibliothek, mit der ich meinen Server laufen lassen kann.
Ich merke keinerlei Unterschied, da es ein vollwertiger GRPC Server ist.</p><p>Aber Connect hat eine Besonderheit: Connect auf dem Server ermöglicht es, dass sich Clients über Websockets verbinden können - von den Details bekomme ich aber wieder nichts mit - denn im Client verwende ich meine generierte connect Bibliothek, die sich um die Kommunikation kümmert. Und zwar MIT Streaming. Bidirektional. Wundervoll!</p><h2 id=kurzfassung-tools>Kurzfassung Tools<a href=#kurzfassung-tools class=hanchor arialabel=Anchor>#</a></h2><p>Wir machen also folgendes:</p><ol><li>Wir definieren unsere Schnittstelle in Protobuf</li><li>Wir generieren uns unsere Server mit der connect Bibliothek</li><li>Wir generieren uns unsere Webclients mit der conenct Bilbiothek</li><li>Wir generieren unsere anderen Clients (z.B. andere Server) mit der GRPC Bibliothek oder auch connect.</li></ol><p>Nun können wir zwischen Webclient und Server kommunizieren - und das ganze auch noch sicher, da Websockets verschlüsselt sind. Und vor allem: Wir haben die Typsicherheit von Protobuf und die Effizienz von GRPC. Wundervoll!</p><h2 id=fazit>Fazit<a href=#fazit class=hanchor arialabel=Anchor>#</a></h2><p>GRPC und Protobuf sind keine vorübergehenden Trends. Sie sind ausgereifte Technologien, die sich in der Praxis bewährt haben und kontinuierlich weiterentwickelt werden. Mit der Einführung von Connect wird die Verwendung von GRPC noch zugänglicher und vielseitiger.</p><p>Als Entwickler schätze ich die Zuverlässigkeit, Geschwindigkeit und Einfachheit, die GRPC bietet. Es ermöglicht mir, robuste und effiziente APIs zu erstellen, die sowohl für meine Teammitglieder als auch für die Endbenutzer einen Mehrwert bieten.
Wenn Du noch nie mit GRPC gearbeitet haben, empfehle ich Ihnen, es in Ihrem nächsten Projekt auszuprobieren. Die klaren Schnittstellen, die Leistung und die Flexibilität sind es wert.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><a href=https://philipp-weissmann.de/dateien-bereinigen-mit-fd-und-sd/ class="button inline next">Dateien bereinigen mit fd und sd</a></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>